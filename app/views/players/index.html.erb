<div>
  <form action="/players">
    <select name="price">
      <option value="all">Max Price</option>
      <% (39..140).to_a.map { |p| p.to_f / 10 }.each do |price| %>
      <option value="<%= price %>">£<%= price %>m</option>
      <% end %>
    </select>
    <select name="position">
      <option value="all">Position</option>
      <% ["GKP", "DEF", "MID", "FOR"].each do |pos| %>
      <option value="<%= pos %>"><%= pos %></option>
      <% end %>
    </select>
    <input type="submit" value="Apply">
  </form>
</div>

<div class="container">
  Showing
  <% if @params[0] == "DEF" %>
    defenders
  <% elsif @params[0] == "GKP" %>
    goalkeepers
  <% elsif @params[0] == "MID" %>
    midfielders
  <% elsif @params[0] == "FOR" %>
    forwards
  <% else %>
    all players
  <% end %>
  <%= @params[1] == "all" ? "" : "under £#{@params[1]}m"%>
  <table>
  <table>
    <tr>
  <th data-tooltip="Player's overall ranking in the league">Rank</th>
  <th data-tooltip="Player's full name">Name</th>
  <th data-tooltip="Player's position on the field">Position</th>
  <th data-tooltip="The team the player is part of">Team</th>
  <th data-tooltip="Current price of the player">Price</th>
  <th data-tooltip="Player's current form based on recent performance">Form</th>
  <th data-tooltip="Percentage of teams that have selected this player">% Selected</th>
  <th data-tooltip="Difficulty of next 5 matches for this player - higher the number, tougher the fixtures!!">Fixture Difficulty</th>
  <th data-tooltip="Index measuring player's Influence, Creativity, and Threat - a key statistic!">ICT Index</th>
</tr>

    <% @ranked.first(30).each_with_index do |player, index| %>
    <tr class="<%= @ranked[index].home_team.short_name.downcase %>">
      <div class="player-info-row"><td><%= link_to "#{index + 1}", player_path(player), class:"table-link" %></td></div>
      <div class="player-info-row"><td><%= link_to "#{@ranked[index].web_name}", player_path(player), class:"table-link" %></td></div>
      <div class="player-info-row"><td><%= link_to "#{@ranked[index].position}", player_path(player), class:"table-link" %></td></div>
      <div class="player-info-row"><td><%= link_to "#{@ranked[index].home_team.short_name}", player_path(player), class:"table-link" %></td></div>
      <div class="player-info-row"><td><%= link_to "£#{@ranked[index].price}m", player_path(player), class:"table-link" %></td></div>
      <div class="player-info-row"><td><%= link_to "#{@ranked[index].form}", player_path(player), class:"table-link" %></td></div>
      <div class="player-info-row"><td><%= link_to "#{@ranked[index].selected}%", player_path(player), class:"table-link" %></td></div>
      <div class="player-info-row"><td><%= link_to "#{@ranked[index].fixture_difficulty}", player_path(player), class:"table-link" %></td></div>
      <div class="player-info-row"><td><%= link_to "#{@ranked[index].ict}", player_path(player), class:"table-link" %></td></div>
    </tr>
    <% end %>
  </table>
</div>
